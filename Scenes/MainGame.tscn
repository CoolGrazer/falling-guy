[gd_scene load_steps=10 format=3 uid="uid://cdl14s8j7xuxy"]

[ext_resource type="PackedScene" uid="uid://dx7trrth1tycm" path="res://Scenes/Touchscreen.tscn" id="1_f2ext"]
[ext_resource type="Texture2D" uid="uid://cehjit1vk4dpo" path="res://Graphics/Black.png" id="2_0uj1g"]
[ext_resource type="Texture2D" uid="uid://0t6x6j7m5cbt" path="res://Graphics/Baloon.png" id="3_n0uec"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ql3qm"]
particle_flag_align_y = true
particle_flag_disable_z = true
emission_shape_scale = Vector3(1, 0, 1)
emission_shape = 3
emission_box_extents = Vector3(96, 0, 1)
direction = Vector3(0, 1, 0)
spread = 0.0
initial_velocity_min = -98.0
initial_velocity_max = -98.0
gravity = Vector3(0, -392, 0)

[sub_resource type="GDScript" id="GDScript_433oo"]
script/source = "extends GPUParticles2D

func _changeAmt(n):
	amount = n

func _changeGravity(g):
	process_material.gravity.y = g

func _on_puck_input(input):
	if input == \"flick\":
		_changeAmt(amount * 2)
		_changeGravity(process_material.gravity.y * 2)
"

[sub_resource type="GDScript" id="GDScript_7xn5d"]
script/source = "extends Sprite2D

func _process(delta):
	rotation_degrees = sin(1000 + Engine.get_frames_drawn() * 0.1) * 12
	position.y += sin(10000 + Engine.get_frames_drawn() * 0.1) * 0.5
"

[sub_resource type="Animation" id="Animation_vj7ke"]
resource_name = "Loo"
length = 0.6
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5]
}

[sub_resource type="Animation" id="Animation_x0fwt"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [1]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_r25vf"]
_data = {
"Loo": SubResource("Animation_vj7ke"),
"RESET": SubResource("Animation_x0fwt")
}

[node name="Main" type="Node2D"]

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = 192.0
offset_right = 384.0
offset_bottom = 256.0
color = Color(0.192157, 0.337255, 0, 1)

[node name="Container" type="Container" parent="."]
clip_contents = true
offset_left = 192.0
offset_right = 384.0
offset_bottom = 256.0
mouse_filter = 2

[node name="Puck" parent="Container" instance=ExtResource("1_f2ext")]
position = Vector2(99, 171)

[node name="GPUParticles2D" type="GPUParticles2D" parent="."]
z_index = -1
position = Vector2(96, 320)
amount = 16
process_material = SubResource("ParticleProcessMaterial_ql3qm")
texture = ExtResource("2_0uj1g")
lifetime = 2.0
draw_order = 2
trail_lifetime = 0.2
script = SubResource("GDScript_433oo")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(97, 97)
rotation = 0.785398
texture = ExtResource("3_n0uec")
hframes = 6
frame = 1
script = SubResource("GDScript_7xn5d")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_r25vf")
}
autoplay = "Loo"

[node name="Camera2D" type="Camera2D" parent="."]
offset = Vector2(192, 128)

[connection signal="input" from="Container/Puck" to="GPUParticles2D" method="_on_puck_input"]
